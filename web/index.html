<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript">
        function popup() {
            var modal = document.getElementById("modal");
            var modal_content = document.getElementById("modal_content");
            modal.style.display = "block";
            modal_content.style.display = "block";
        }

    </script>
    <!-- <script type="text/javascript" src="./lib/vexflow.js"></script> -->
    <script type="text/javascript" src="../lib/vextab.dev.js"></script>
    <script type="text/javascript" src="../lib/ml5.min.js"></script>
    <script type="text/javascript" src="../lib/Tone.js"></script>

    <script type="text/javascript" src="../src/velato_constants.js"></script>
    <script type="text/javascript" src="../src/velato_token.js"></script>
    <script type="text/javascript" src="../src/velato_note.js"></script>
    <script type="text/javascript" src="../src/velato_web_display.js"></script>
    <script type="text/javascript" src="../src/velato_programbuilder.js"></script>
    <script type="text/javascript" src="../src/velato_audio_interface.js"></script>
    <script type="text/javascript" src="page_controls.js"></script>
</head>
<body>
<div id="outframe">
    <div id="header">
        <h1>Velato</h1>
        <h2>Program by <a href="javascript:popup();" id="whistling">whistling</a>. A Hands-Free Code Editor by <a href="http://danieltemkin.com" id="danieltemkin">Daniel Temkin</a>. One of <a href="https://mitpress.mit.edu/9780262553087/forty-four-esolangs/">Forty-Four Esolangs</a>.</h2>
    </div><div class="main">
        <div class="input-stream box">Input Stream
            <div id="incidentals"></div>
        </div>
        <div class="note-program box">
            <div id="currentlySounding">
                Current Note:
                <span id="currNote"></span><br/>
                Current Root:
                <span id="rootNote"></span>
            </div>
            <div id="controls">
                <div id="stop" class="button">PAUSE</div>
                <div id="restart" class="button">RESET</div>
                <div id="remove" class="button">UNDO</div>
            </div>
            <div id="command_entry">
                <div class="notes_header">Current Command</div>
                <div id="curr_cmd_notes">
                </div>
                <div id="notes_row1" style="height:20%">
                    <div id="feedback"><span class="exp">Whistle a first note to set the root. Then whistle your first command!<br/>Look at the Lexicon to the right for options.</span></div>
                </div>
                <div id="notes_row2" style="height:60%">
                    <div class="notes_header">Velato Program</div>
                    <div id="velato_program"></div>
                </div>
            </div>
        </div>
        <div class="text-program box">
            <div id="js-program">JS Program
                <pre><code class="language-javascript" id="program_txt"></code></pre>
            </div>
            <!-- <div id="js-output">Program Output
                <div id="output"></div>
            </div> -->
        </div>
        <div class="col4 box">
            <div class="instructions">
            <h2>Lexicon</h2>
            <a href="javascript:popup();">How do I use this?</a>
            <p>Click the play button (&#x23F5;) to hear one or two options in how to sound the notes for this phrase</p>
            <br/>
            <span class="playbutton" onclick="tone('root')"><b>&#x23F5;</b> Play root note</span>
            <h3>Commands</h3>

            <ul id="cmdlist"></ul>

            <h3>Expressions</h3>
            <p>all expressions are prefix</p>

            <ul id="explist"></ul>

            <div class="padding"></div>
        </div>
        </div>
    </div>
</div><div id="modal"><div id="modal_content"><span class="close" id='close'>&times;</span><h3>HOW TO WHISTLE A PROGRAM</h3>
    <ol>
        <li><b>Do not use a headset!</b> It is likely noise-cancelling.</li>
        <li>Whistle a tone very briefly, and see it appear in the input stream.  Push the pitch up and down to the note you want. Hold it long enough and it registers as part of the program.</li>
        <li>Whistle your first note to set the initial root. All intervals are in terms of that root.</li>
        <li>Continue whistling your program. Keep in mind that this language has a different grammar from the original Velato and from JS. For one thing, all operators are prefix. To add two numbers, whistle plus then the first, then the second. You can replace either with another expression.</li>
        <li>If you can't find the note, try the play buttons in the Lexicon. Most combinations have more than one possibility: major/minor or perfect/diminished. The play button will play both.</li>
        <li>Keep whistling programs to improve your pitch!</li>
    </ol>
</div>
</div>
</div><div id="loading_modal"><div id="modal_content">LOADING AUDIO STREAM...</div></div>
</body>
</html>
